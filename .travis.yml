matrix:
  include:
    - stage : build wasm worker
    - language: rust
      rust: stable
      name: "check wasm32 support"
      install: rustup target add wasm32-unknown-unknown
      before_script:
        - cargo check --target wasm32-unknown-unknown
        - cd edf-viewer-worker
        - curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh
      script:
        - sh ./build.sh
    - stage : build Vue.js App
    - langage : node_js
      before_script:
        - cd ../edf-viewer-app
        - npm install
      script:
        - npm run build